<section>
    <div class="row page-title">
        <span class="title">Campaigns</span>
        <span class="separator">|</span>
        <span class="uppercase text-muted sub-title">Create Custom Campaigns</span>
    </div>
    <div class="row campaigns-container">
        <div class="row">
            <div class="col-md-6 col-md-offset-6">
                <a ui-sref="campaigns.create">
                    <i class="fa fa-plus-circle"></i>New Campaign
                </a>
            </div>
        </div>
        <div class="row table-container">
            <div class="col-md-9">
                <table st-table="campaignsListController.campaigns" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Campaign Name</th>
                            <th>Unique Code</th>
                            <th># Leads</th>
                            <th>Created On</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="campaign in campaignsListController.campaigns">
                            <td>
                                <a href='#' ng-click="campaignsListController.loadWidget(campaign)"> {{campaign.name}} </a>
                                <div class="document-type-container" ng-show="campaignsListController.codePreviewId === campaign._id">
                                    <div class="up-arrow"></div>
                                    <div class="document-type-icons-container">
                                        <label class="text-muted">Document Type</label>
                                        <i class="fa fa-close pull-right" ng-click="campaignsListController.hideCodePreview()" title="Close"></i>
                                        <div class="document-type-icons">
                                            <img ng-src="/modules/widgets/client/img/mail-open.png" alt="" ngf-drop class="img-responsive" ng-click="campaignsListController.showDocumentDetails('mail', campaign)"
                                                ng-class="campaignsListController.showEmail ? 'selected': 'not-selected'">
                                            <img ng-src="/modules/widgets/client/img/document.png" alt="" ngf-drop class="img-responsive" ng-click="campaignsListController.showDocumentDetails('document', campaign)"
                                                ng-class="campaignsListController.showDocument ? 'selected': 'not-selected'">
                                            <img ng-src="/modules/widgets/client/img/web.png" alt="" ngf-drop class="img-responsive" ng-click="campaignsListController.showDocumentDetails('web', campaign)"
                                                ng-class="campaignsListController.showWeb ? 'selected': 'not-selected'">
                                        </div>
                                        <div ng-show="campaignsListController.showEmail">
                                            <div class="arrow-up"></div>
                                            <div class="document-type-details">
                                                <span class="document-title">Follow the following instructions to insert email signature: </span>
                                                <div class="document-instructions">
                                                    <ol>
                                                        <li> Select the below signature preview (Command+A) and Copy (Command+C). On other broswers where
                                                            you cannot select the content by highlighting it, go to Edit > Select All and then Edit >
                                                            Copy </li>
                                                        <li>
                                                            In Gmail, you may see a Machine Bearing icon on the upper right hand side. In the drop down menu, go to Settings.
                                                        </li>
                                                        <li>Under the General tab in Settings, scroll down till you find the Signature section. Click inside
                                                            the Signature edit box and go to Edit > Paste to paste in the HTML you have stored in the
                                                            clipboard (Command+V). Click “Save Changes” right below the Signature edit box.</li>
                                                    </ol>
                                                </div>
                                                <div class="signature-preview horizontal-centered">
                                                    <table cellspacing='0' cellpadding='0' border-spacing='0'>
                                                        <tr>
                                                            <td style="margin:0;padding:0;">
                                                                <a href='{{campaignsListController.chatUrl}}' title="Image" style="border:none;text-decoration:none;" target="_blank">
                                                                    <img src='{{campaignsListController.logoUrl}}' alt="" style="border:none;width:5rem;height:5rem;">
                                                                </a>
                                                            </td>
                                                            <td style="margin:0; padding:0; padding-left: 10px; font-family:'Lucida Grande',sans-serif;white-space:nowrap;font-size:16px;">
                                                                <a href='{{campaignsListController.chatUrl}}' style="border:none;text-decoration:none;color:{{campaignsListController.selectedWidget.color}}"
                                                                    target="_blank"><span style="color: {{campaignsListController.selectedWidget.color}}">{{campaignsListController.selectedWidget.widgetText}}</span></a>
                                                                    <div class='branding'>Powered by InstaConnect</div>
                                                            </td>                                
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-show="campaignsListController.showDocument">
                                            <div class="arrow-center"></div>
                                            <div class="document-type-details">
                                                <span class='document-title'>Follow the below instructions to insert widget in your document:</span>
                                                <button class="btn btn-default" tooltip-placement="right" ngclipboard data-clipboard-text="{{campaignsListController.logoUrl}}"><i class='fa fa-clipboard'></i> Copy Image URL</button>
                                                <button class="btn btn-default" tooltip-placement="right" ngclipboard data-clipboard-text="{{campaignsListController.chatUrl}}"><i class='fa fa-clipboard'></i> Copy Chat URL</button>
                                                <div class="document-instructions">
                                                    <ol>
                                                        <li>In your word document, place the cursor where you want insert the widget</li>
                                                        <li>
                                                            Click on Insert tab and select Pictures. A pop up will appear in "File name" field enter - '{{campaignsListController.logoUrl}}' (without quotes) or click on Copy Image URL button above
                                                        </li>
                                                        <li>Click on Insert button, it will insert the widget image in your document.</li>
                                                        <li>
                                                            Click on widget image and click on Insert tab and select Hyperlink. An "Insert Hyperlink" pop up menu will appear, in "Address" field enter - {{campaignsListController.chatUrl}} or click on Copy Chat URL button above and click on OK button
                                                        </li>
                                                        <li>
                                                            Right click on your image and select Wrap text option and select Square option from menu.
                                                        </li>
                                                        <li>
                                                            Add the text {{campaignsListController.selectedWidget.widgetText}} beside the image. To make text vertically center align, select the image and drag image to align it properly so that the text should be visible vertically aligned.
                                                        </li>
                                                        <li>
                                                            Select the text and click on Insert tab and select Hypderlink. An "Insert Hyperlink" pop up menu will appear, in "Address" field enter - {{campaignsListController.chatUrl}} and click on OK button
                                                        </li>
                                                        <li>
                                                            Select the text and from Home tab remove the underline by clicking on U menu item.
                                                        </li>
                                                        <li>
                                                            From Home tab select A menu item and select More Colors option. A color pop up will appear, select the custom tab and enter values {{campaignsListController.rgbColor}} and click on OK button
                                                        </li>
                                                    </ol>
                                                </div> 
                                            </div>
                                        </div>
                                        <div ng-show="campaignsListController.showWeb">
                                            <div class="arrow-right"></div>
                                            <div class="document-type-details">                    
                                                <span class="document-title">Copy the below html code and Paste it in your website</span>                    
                                                <button class="copy-button" tooltip-placement="right" uib-tooltip="Click to copy!" ngclipboard data-clipboard-target="#bar">Copy</button>
                                                <pre>
                                                    <code class="language-markup" prism id='bar'>
                            &lt;div style="position: absolute; right: 2rem; bottom: 2rem; display: flex; background-color: #fff; border:1px solid #cfcfcf; padding: 5px;border-radius: 10px; box-shadow: 1px 1px 1px #cfcfcf; align-items: center; min-height: 6vh; max-width: 20vw;"&gt;
                                &lt;div&gt;
                                    &lt;a href="{{campaignsListController.chatUrl}}" target="_blank"&gt;
                                        &lt;img src="{{campaignsListController.logoUrl}}" style="max-width: 3rem;"/&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                                &lt;div style="font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif; padding-left:5px; padding-right:5px;"&gt;
                                    &lt;a href="{{campaignsListController.chatUrl}}" style="text-decoration: none; color: {{campaignsListController.selectedWidget.color}}" target="_blank"&gt;
                                        &lt;span&gt;{{campaignsListController.selectedWidget.widgetText}}&lt;/span&gt;
                                        &lt;div style="font-size: 8px; padding-top: 3px;"&gt;Powered by InstaConnect&lt;/div&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                                                    </code>
                                                </pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{campaign.uniqueCode}}</td>
                            <td>{{campaign.numberOfLeads}}</td>
                            <td>{{campaign.created | amDateFormat:'MMM DD, YYYY'}}</td>
                            <td> <a href='#' ng-click="campaignsListController.codePreview(campaign)">Get Code</td>
                        </tr>
                    </tbody>
                </table>
               
                <div class='no-campaigns-message' ng-show="campaignsListController.campaigns.length === 0">
                    No Campaigns Available.
                </div>
            </div>
            <div class="col-md-3" ng-show="campaignsListController.showWidgetPreview">
                <div class="widget-header">WIDGET PREVIEW</div>
                <div class="form-group preview">
                    <label for="preview">Preview</label>
                    <div class="preview-content">
                        <img ngf-src="campaignsListController.selectedWidget.imageUrl"
                            alt="" ngf-drop class="img-responsive">
                            <span ng-style="{'color': campaignsListController.selectedWidget.color}">{{campaignsListController.selectedWidget.widgetText}}</span>
                    </div>                    
                </div>
                <div class="customize-widget">
                    <a href="#" data-toggle="modal" data-target="#customize-widget-modal">
                        Customize
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="create-campaign-modal" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">New Campaign</h3>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="campaignName">Campaign Name</label>
                        <input type="text" id="campaignName" name="campaignName" class="form-control" required ng-model='campaignsListController.campaignName'
                            placeholder="Campaign Name">
                        <p class="show-error" ng-show="campaignsListController.campaignNameError"> Please enter Campaign Name </p>
                    </div>
                    <div class="form-group">
                        <label for="pickColor">Assign Widget</label>
                        <select class="form-control" ng-model="campaignsListController.dropDownWidget">
                            <option value="-1"> Select Widget </option>
                            <option ng-repeat="widget in campaignsListController.widgets" value="{{widget._id}}">
                                {{widget.widgetName}}
                            </option>
                        </select>
                        <p class="show-error" ng-show="campaignsListController.selectedWidgetError"> Please assign a widget to this campaign </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="campaignsListController.createCampaign()">Create</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="campaignsListController.resetForm()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="customize-widget-modal" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">            
            <div class="modal-content">
                <div class="modal-body">
                    <i class="fa fa-close pull-right" data-dismiss="modal" title="Close"></i>
                    <div class="row page-title">
                        <span class="title">Widgets</span>
                        <span class="separator">|</span>
                        <span class="uppercase text-muted sub-title">Build &amp; Customize Your Widget</span>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-xs-12">                            
                            <div class="form-group">
                                <label for="pickColor">Pick Color</label>
                                <input type="text" id="pickColor" name="pickColor" class="form-control" required ng-model='campaignsListController.selectedWidget.color'
                                    colorpicker readonly="readonly">
                            </div>
                            <div class="form-group">
                                <label for="changeImage">Change Image</label>
                            </div>
                            <div class="form-group">
                                <img ngf-src="campaignsListController.fileSelected ? campaignsListController.picFile : campaignsListController.selectedWidget.imageUrl ? campaignsListController.selectedWidget.imageUrl : ''"
                                    alt="" ngf-drop class="img-responsive" id="widgetImage">
                                    <div class="form-group" ng-if="!campaignsListController.logo || !campaignsListController.isDisabled">
                                        <button class="btn btn-primary btn-file btn-small" ngf-select="(campaignsListController.fileSelected = true) && (campaignsListController.loading = false)"
                                            ng-model="campaignsListController.picFile" accept="image/*" ngf-before-model-change="campaignsListController.loading = true"
                                            ngf-resize="{width: 100}" ngf-resize-if="$width > 100 || $height > 100">Upload Image</button>
                                        <button class="btn btn-default btn-small" ng-show='campaignsListController.fileSelected' ng-click="campaignsListController.restoreDefault()">Restore Default</button>
                                    </div>                    
                                </div>
                            <div class="form-group">
                                <label for="changeText">Change Text</label>
                                <input type="text" id="changeText" name="changeText" class="form-control" required ng-model='campaignsListController.selectedWidget.widgetText'
                                    placeholder="Ask me anything">
                            </div>
                            <button class="btn btn-primary btn-large hidden-xs" ng-click="campaignsListController.saveWidget()">Save</button>
                        </div>
                        <div class="col-md-6 col-lg-6 col-xs-12">
                            <div class="form-group preview">
                                <label for="preview">Preview</label>
                                <div class="preview-content">
                                    <img ngf-src="campaignsListController.fileSelected ? campaignsListController.picFile : campaignsListController.selectedWidget.imageUrl ? campaignsListController.selectedWidget.imageUrl : ''"
                                        alt="" ngf-drop class="img-responsive">
                                        <span ng-style="{'color': campaignsListController.selectedWidget.color}">{{campaignsListController.selectedWidget.widgetText}}</span>
                                </div>
                            </div> 
                            <button class="btn btn-primary btn-large visible-xs" ng-click="campaignsListController.saveWidget()">Save</button>                           
                        </div>
                    </div>
                </div>                
            </div>
        </div>
    </div>
</section>